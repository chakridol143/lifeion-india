<!-- TOP INFO BAR -->
<div class="top-bar">
  Give Your Family the Gift of Healthy Water. Call
  <strong>844-335-2174</strong>
</div>

<!-- MAIN HEADER -->
<div class="header-main">
  <!-- LOGO -->
  <div class="header-logo">
    <img class="header-logo-img" src="/images/Ionizer_Logo.png" alt="Life Ionizers" />
  </div>

  <!-- SEARCH - DESKTOP ONLY -->
  <div class="header-search desktop-only">
    <div class="search-category">
      All <i class="bx bx-chevron-down"></i>
    </div>

    <input type="text" placeholder="Search for products" />

    <i class="bx bx-microphone"></i>
  </div>

  <!-- ACTION ICONS -->
  <div class="header-actions">
    <!-- SEARCH ICON - MOBILE ONLY -->
    <div class="icon-circle mobile-search-icon" (click)="openSearch()">
      <i class="bx bx-search"></i>
    </div>

    <div class="icon-circle">
      <i class="bx bx-user"></i>
    </div>

    <div class="icon-circle cart">
      <i class="bx bx-cart"></i>
    </div>

    <!-- HAMBURGER MENU - MOBILE ONLY -->
    <div class="icon-circle mobile-menu-icon" (click)="toggleMenu()">
      <i class="bx bx-menu" *ngIf="!menuOpen"></i>
      <i class="bx bx-x" *ngIf="menuOpen"></i>
    </div>
  </div>
</div>

<!-- SEARCH OVERLAY PANEL -->
<div class="full-search" [class.active]="searchOpen">
  <div class="search-area">
    <i class="bx bx-search search-big-icon"></i>
    <input
      type="text"
      placeholder="SEARCH FOR..."
      [(ngModel)]="overlaySearch"
      (keyup)="onSearch(overlaySearch)"
      (keydown.enter)="performSearch()"
      class="search-input"
    />
    <span class="close-search" (click)="closeSearch()">✕</span>
  </div>
</div>

<!-- NAVIGATION - DESKTOP ONLY -->
<nav class="header-nav desktop-only">
  <ng-container *ngFor="let item of navItems">
    <!-- DROPDOWN ITEMS -->
    <div
      *ngIf="hasSubmenu(item)"
      class="nav-link nav-dropdown"
      (mouseenter)="onDropdownHover(item.label)"
      (mouseleave)="onDropdownLeave()"
    >
      <a [routerLink]="item.route || 'javascript:void(0)'">
        {{ item.label }} <i class="bx bx-chevron-down"></i>
      </a>

      <div class="dropdown-wrapper">
        <ul class="dropdown-menu">
          <li *ngFor="let sub of item.submenu">
            <a [routerLink]="sub.route">{{ sub.label }}</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- REGULAR NAV ITEMS -->
    <a
      *ngIf="!hasSubmenu(item)"
      [routerLink]="item.route"
      routerLinkActive="active"
      class="nav-link"
    >
      {{ item.label }}
    </a>
  </ng-container>
</nav>

<!-- MOBILE MENU OVERLAY -->
<div class="mobile-menu-overlay" [class.active]="menuOpen" (click)="closeMenu()"></div>

<!-- MOBILE MENU PANEL -->
<div class="mobile-menu-panel" [class.active]="menuOpen">
  <!-- CLOSE BUTTON -->
  <div class="mobile-menu-header">
    <span class="close-menu-btn" (click)="closeMenu()">✕</span>
  </div>

  <!-- MOBILE NAVIGATION -->
  <nav class="mobile-nav">
    <ng-container *ngFor="let item of navItems">
      <!-- DROPDOWN ITEMS -->
      <div *ngIf="hasSubmenu(item)" class="mobile-nav-item">
        <div class="mobile-nav-link" (click)="toggleDropdown(item.label)">
          <span>{{ item.label }}</span>
          <i
            class="bx bx-chevron-down"
            [class.rotated]="activeDropdown === item.label"
          ></i>
        </div>

        <!-- SUBMENU -->
        <div
          class="mobile-submenu"
          [class.active]="activeDropdown === item.label"
        >
          <a
            *ngFor="let sub of item.submenu"
            [routerLink]="sub.route"
            class="mobile-submenu-link"
            (click)="onNavClick()"
          >
            {{ sub.label }}
          </a>
        </div>
      </div>

      <!-- REGULAR NAV ITEMS -->
      <a
        *ngIf="!hasSubmenu(item)"
        [routerLink]="item.route"
        class="mobile-nav-link mobile-nav-item"
        (click)="onNavClick()"
      >
        {{ item.label }}
      </a>
    </ng-container>
  </nav>
</div>
